<div *ngIf="productItem" class="product-page">

    <!-- Breadcrumb -->
    <nav class="breadcrumb">
        <span routerLink="/">Home</span> ‚Ä∫
        <span routerLink="/products">Products</span> ‚Ä∫
        <span>{{ productItem.productTitle }}</span>
    </nav>

    <div class="product-main">

        <!-- IMAGE SECTION -->
        <section class="gallery">
            <div class="thumbs">
                <img *ngFor="let img of productItem.imageUrls" [src]="img" (mouseenter)="hoverImage(img, 0)"
                    [class.active]="img === selectedImage">
            </div>
            <div class="image-view" (mousemove)="onMouseMove($event)" (mouseenter)="toggleLens(true)"
                (mouseleave)="toggleLens(false)">

                <img #mainImage [src]="selectedImage" alt="Product Image" />

                <div #lens class="lens" *ngIf="isHovering" [style.backgroundImage]="'url(' + selectedImage + ')'"
                    [style.backgroundPosition]="lensPosition">
                </div>

            </div>

        </section>

        <!-- INFO SECTION -->
        <section class="info">

            <h1>{{ productItem.productTitle }}</h1>

            <!-- Rating -->
            <div class="rating">
                ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ <span>(128 reviews)</span>
            </div>

            <!-- Price -->
            <div class="price">
                ‚Çπ {{ productItem.price }}
                <span *ngIf="productItem.discountPercent" class="discount">
                    -{{ productItem.discountPercent }}%
                </span>
            </div>

            <!-- Stock -->
            <div class="stock" [class.out]="!productItem.inStock">
                {{ productItem.inStock ? 'In Stock' : 'Out of Stock' }}
            </div>

            <!-- Variations -->
            <div *ngIf="productItem.productVariations[0]?.color !== 'no_color'" class="variants">
                <h4>Select Variant</h4>
                <button *ngFor="let v of productItem.productVariations" (click)="getSize(v.size, v.color)"
                    [disabled]="v.quantity === 0" [class.selected]="
     selectedSize=== v.size &&
    selectedColor === v.color
  ">
                    {{ v.color | titlecase }} / {{ v.size }}
                </button>

            </div>
            <!-- Quantity -->
            <div class="qty">
                <label>Qty</label>
                <input type="number" min="1" [(ngModel)]="quantity">
            </div>
            <div *ngIf="!validateQuantity() && selectedColor" class="error text-danger">
                Quantity exceeds available stock ({{ maxQuantity }} available).
            </div>
            <div *ngIf="!validateQuantity() && productItem.productVariations[0]?.color == 'no_color'" class="error text-danger">
                Quantity exceeds available stock ({{ maxQuantity }} available).
            </div>
            <!-- Buttons -->
            <div class="actions">
                <!-- <button *ngIf="productItem.productVariations[0]?.color != 'no_color'" class="cart"
                    (click)="open(productItem)">
                    Add to Cart
                </button> -->
                <button class="btn btn-primary" [disabled]="!validateQuantity()" (click)="openSimple(productItem)">
                    Add to Cart
                </button>
                <button class="buy">
                    Buy Now
                </button>
            </div>

            <!-- Delivery -->
            <div class="delivery">
                üöö Free delivery in 3‚Äì5 days
                üîÑ Easy 7-day returns
            </div>

        </section>
    </div>

    <!-- DETAILS TABS -->
    <section class="details">
        <details open>
            <summary>Description</summary>
            <p>{{ productItem.description }}</p>
        </details>

        <details>
            <summary>Specifications</summary>
            <ul>
                <li>High Quality</li>
                <li>12 Months Warranty</li>
            </ul>
        </details>

        <details>
            <summary>Reviews</summary>
            <p>No reviews yet</p>
        </details>
    </section>

</div>