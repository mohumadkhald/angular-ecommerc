<div *ngIf="user && user != null" style="margin-bottom: 300px;" class="container mt-5 py-4 h-100">
  <div class="row h-100">
    <div class="col-lg-4">
      <div class="card">
        <div class="rounded-top text-white d-flex flex-row align-items-end"
          style="background-color: #000; height:200px; position:relative;">

          <div class="ms-4 mt-5 d-flex flex-column align-items-center position-relative" style="width: 150px;">
            <div class="position-relative image-container" (mouseover)="showChangeImageButton = true" (mouseleave)="showChangeImageButton = false">
              <img *ngIf="user.imageUrl" [src]="user.imageUrl" alt="Generic placeholder image"
                class="img-fluid img-thumbnail mt-4 mb-2 rounded-circle">
              <img *ngIf="!user.imageUrl" src="../../assets/no-user.jpg" alt="Generic placeholder image"
                class="img-fluid img-thumbnail mt-4 mb-2 rounded-circle">
              <button *ngIf="showChangeImageButton" (click)="triggerFileInput()" class="btn btn-outline-light btn-sm position-absolute change-image-btn">
                Change Image
              </button>
              <input type="file" #fileInput (change)="onFileSelected($event)" class="d-none">
            </div>
            <button (click)="open(user)" type="button" class="btn btn-outline-light btn-sm" style="z-index: 1;">
              Edit profile
            </button>
          </div>
          
          

          <div class="ms-3" style="margin-bottom: 20px;">
            <h5>{{ user.firstName }} {{ user.lastName }}</h5>
            <p>New York</p>
          </div>
        </div>
        <div class="card-body p-4 text-black">
          <div class="mb-5">
            <p class="lead fw-normal mb-1">About</p>
            <div class="p-4 rounded" style="background-color: #f8f9fa;">
              <p class="font-italic mb-1">Web Developer</p>
              <p class="font-italic mb-1">Lives in New York</p>
              <p class="font-italic mb-0">{{ user.role }}</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div style="margin-bottom: 200px;" class="offset-lg-1 col-lg-7">
      <div class="card">
        <div class="card-body p-4 text-black">
          <div class="d-flex justify-content-between align-items-center mb-4">
            <p class="lead fw-normal mb-0">Recent Products</p>
            <button type="button" class="btn btn-primary" (click)="openAddProductModal()">Add Product</button>
          </div>
          <div class="row g-2">
            <div class="col-6 mb-2" *ngFor="let product of visibleProducts">
              <h2 style="margin: 0px; cursor: pointer;" class="text" (click)="redirectToDetails(product.productId)"> {{ product.productTitle | capitalize }} </h2>
              <img [src]="product.imageUrl" alt="image 1" (click)="redirectToDetails(product.productId)" class="w-100 rounded-3">
            </div>
          </div>
          <div class="d-flex justify-content-center">
            <button *ngIf="hasMoreProducts" type="button" class="btn btn-outline-secondary mt-4"
              (click)="showMoreProducts()">Show More</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
