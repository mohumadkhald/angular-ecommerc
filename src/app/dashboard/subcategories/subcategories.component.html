<div *ngIf="auth()">
    <h1 class="text-center my-2">Manage SubCategories</h1>
    <div class="container">
        <div class="table-responsive">
            <a class="btn btn-primary mb-3" (click)="open()"><i class="fa fa-plus"></i> Add New SubCategory</a>
            <table *ngIf="subCategories.length > 0; else noUsers"
                class="main-table table table-striped table-bordered table-hover">
                <thead class="thead-dark">
                    <tr>
                        <th>#ID</th>
                        <th>SubCategory Name</th>
                        <th>Category</th>
                        <th>Image</th>
                        <th>Control</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let category of paginatedSubCategories">
                        <td data-label="ID"> {{ category.id }}</td>

                        <td data-label="SubCategory Name">
                            <span class="span-name">Name: </span> {{ category.name }}
                        </td>

                        <td data-label="Category">
                            Category: {{ category.categoryName }}
                        </td>

                        <td data-label="Image">
                            <div class="image-wrapper">
                                <img [src]="category.img" alt="SubCategory Image">

                                <button (click)="triggerFileInput(category)" class="change-image-btn">
                                    Change Image
                                </button>
                            </div>

                            <input type="file" #fileInput (change)="onFileSelected($event)" class="d-none">
                        </td>

                        <td data-label="Control">
                            <a (click)="update(category)" class="btn btn-success btn-sm mb-1 w-100">
                                <i class="fa fa-edit"></i> Edit
                            </a>

                            <a class="btn btn-danger btn-sm w-100" (click)="deleteCategory(category.categoryId)">
                                <i class="fas fa-trash-alt"></i> Delete
                            </a>
                        </td>
                    </tr>

                </tbody>
            </table>
            <nav class="d-flex justify-content-center mt-3">
                <ul class="pagination">
                    <li class="page-item" [class.disabled]="currentPage === 1">
                        <a class="page-link" (click)="changePage(currentPage - 1)">Previous</a>
                    </li>

                    <li class="page-item" *ngFor="let page of [].constructor(totalPages); let i = index"
                        [class.active]="currentPage === i + 1">
                        <a class="page-link" (click)="changePage(i + 1)">
                            {{ i + 1 }}
                        </a>
                    </li>

                    <li class="page-item" [class.disabled]="currentPage === totalPages">
                        <a class="page-link" (click)="changePage(currentPage + 1)">Next</a>
                    </li>
                </ul>
            </nav>

            <ng-template #noUsers>
                <p>No Categories found.</p>
            </ng-template>
        </div>
    </div>
</div>